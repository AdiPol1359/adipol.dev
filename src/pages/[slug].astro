---
import { SlideInContainer } from '@/components/blocks';
import { MainLayout } from '@/components/layouts';
import { PostComments, PostView } from '@/components/post';
import { getPosts } from '@/lib/posts';

import type { Post } from '@/types/post';

export const getStaticPaths = async () => {
	const posts = await getPosts();

	return posts.map(post => ({ params: { slug: post.slug }, props: { post } }));
};

interface Props {
	readonly post: Post;
}

const { post } = Astro.props;

const POST_AUTHOR = 'Adrian Polak';
---

<MainLayout
	headOptions={{
		title: post.title,
		description: post.introduction,
		image: post.thumbnail,
		openGraph: {
			type: 'article',
			author: POST_AUTHOR,
			publishedTime: post.date,
			tags: post.tags,
		},
	}}
>
	<SlideInContainer class="flex flex-col gap-y-14">
		<PostView post={post} />
		<PostComments post={post} />
	</SlideInContainer>
</MainLayout>
