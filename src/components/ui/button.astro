---
import { cva } from 'cva';

import type { HTMLTag, Polymorphic } from 'astro/types';
import type { VariantProps } from 'cva';

const button = cva({
	base: 'flex cursor-pointer items-center justify-center gap-x-6 text-nowrap text-text-neutral transition-transform active:scale-95 [&>svg]:text-6',
	variants: {
		color: {
			brand: null,
			primary: null,
			secondary: null,
		},
		fullWidth: {
			false: null,
			true: 'w-full',
		},
		size: {
			sm: 'h-9 rounded-md px-3.5',
			md: 'h-12 rounded-xl px-10',
			lg: 'h-14 rounded-xl px-12.5',
		},
		variant: {
			filled: null,
			outline: 'border border-2',
		},
	},
	compoundVariants: [
		{ variant: 'filled', color: 'brand', class: 'bg-brand' },
		{ variant: 'filled', color: 'primary', class: 'bg-navy-600' },
		{ variant: 'filled', color: 'secondary', class: 'bg-navy-800' },
		{ variant: 'outline', color: 'brand', class: 'border-brand' },
		{ variant: 'outline', color: 'primary', class: 'border-navy-600' },
		{ variant: 'outline', color: 'secondary', class: 'border-navy-800' },
	],
	defaultVariants: {
		color: 'primary',
		fullWidth: false,
		size: 'md',
		variant: 'filled',
	},
});

type Props<T extends HTMLTag> = Polymorphic<{ as: T }> &
	VariantProps<typeof button>;

const {
	as: Tag = 'button',
	color,
	fullWidth,
	size,
	variant,
	...props
} = Astro.props as Props<'button'>;
---

<Tag class={button({ color, fullWidth, size, variant })} {...props}>
	<slot />
</Tag>
