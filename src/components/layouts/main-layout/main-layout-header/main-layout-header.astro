---
import { Container } from '@/components/ui';

import MainLayoutHeaderHomePageLink from './main-layout-header-home-page-link.astro';
import MainLayoutHeaderNavigation from './main-layout-header-navigation/main-layout-header-navigation.astro';
import MainLayoutHeaderToggleButton from './main-layout-header-toggle-button.astro';
---

<Container as="header" class="relative flex items-center justify-between">
	<MainLayoutHeaderHomePageLink />
	<MainLayoutHeaderNavigation />
	<MainLayoutHeaderToggleButton />
</Container>

<script>
	import {
		NAVIGATION_ID,
		TOGGLE_BUTTON_ID,
	} from './main-layout-header.constants';

	const navigation = document.getElementById(NAVIGATION_ID);
	const toggleButton = document.getElementById(TOGGLE_BUTTON_ID);

	let isExpanded = false;

	const synchronizeState = () => {
		const expandedValue = isExpanded.toString();
		const labelValue = isExpanded ? 'Zamknij menu' : 'OtwÃ³rz menu';

		navigation?.setAttribute('data-expanded', expandedValue);
		toggleButton?.setAttribute('aria-expanded', expandedValue);
		toggleButton?.setAttribute('aria-label', labelValue);
	};

	toggleButton?.addEventListener('click', () => {
		isExpanded = !isExpanded;

		synchronizeState();
	});

	synchronizeState();
</script>
